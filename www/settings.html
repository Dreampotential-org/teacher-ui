<!doctype html>
<html>
    <head>
          <title>Settings</title>
          <meta charset="utf-8" />
          <meta name="viewport" content="width=device-width, initial-scale=1" />
          <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
               integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@2.3.2/dist/signature_pad.min.js"></script>
    <!-- user.html JS, CSS start -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/dataTables.bootstrap4.min.css" />
    <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap4.min.js"></script>
    <!-- firebase -->
    <script src="https://www.gstatic.com/firebasejs/7.14.6/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.6/firebase-messaging.js"></script>
    <!-- user.html JS, CSS end -->

          <link rel="stylesheet" href="css/dashboard.css" />
          <link rel="stylesheet" href="css/sidebar.css" />
          <link rel="stylesheet" href="css/setting.css" />
          <link rel="stylesheet" href="css/sms.css" />
          <link rel="stylesheet" href="css/header.css" />
          <link rel="stylesheet" href="css/administration.css" />
          <link rel="stylesheet" href="css/student_list.css" />
          <link rel="stylesheet" href="css/lesson_list.css" />

          <script src="js/main.js"></script>
          <style>
          </style>
     </head>
     <body>
        <div class="container">
            <div class="row" id="screen1">
                <!-- <div class="col-xs-6 col-sm-3">
                    <div class="common-style my-profile" id="my-profile">
                        <span class="glyphicon glyphicon-user"></span>
                        <p>My Profile</p>
                    </div>
                </div>
                <div class="col-xs-6 col-sm-3">
                    <div class="common-style my-meds" onclick="showDiv(this)" id="my-meds">
                        <i class="fas fa-capsules"></i>
                        <p>My Med</p>
                    </div>
                </div>
                <div class="col-xs-6 col-sm-3">
                    <div class="common-style gps-check" onclick="showDiv(this)" id="gps-check">
                        <span class="glyphicon glyphicon-map-marker"></span>
                        <p>GPS Journal</p>
                    </div>
                </div> -->
                <!-- <div class="col-xs-6 col-sm-3">
                    <div class="common-style gps-check" onclick="showDiv(this)" id="send-email">
                        <span class="glyphicon glyphicon-map-marker"></span>
                        <p>User Lesson Response Notify</p>
                    </div>
                </div> -->
                <!-- <div class="col-xs-6 col-sm-3">
                    <div class="common-style video-check">
                        <span class="glyphicon glyphicon-facetime-video"></span>
                        <p>Video Journal</p>
                    </div>
                </div>
                <div class="col-xs-6 col-sm-3">
                    <div class="common-style shelters" id="shelters">
                        <span class="glyphicon glyphicon-home"></span>
                        <p>Shelters</p>
                    </div>
                </div>
            </div> -->
            <div class="row" id="screen2" style="display: none">
                <div class="col-xs-12">
                    <h1> Profile</h1>
                    <div>
                        <div class="input-group name-input" style='display:none'>
                            <span class="input-group-addon">
                                <i class="fa fa-user" aria-hidden="true"></i>
                            </span>
                            <input id="name" type="text" class="form-control" name="name" placeholder="Name">
                        </div>
                        <br>
                        <div class="input-group phone-code-input" style='display:none;'>
                            <span class="input-group-addon">
                                <i class="fa" aria-hidden="true"></i>
                            </span>
                            <input id="phone-code" type="tel" class="form-control" name="phone-code" placeholder="Text Code">
                        </div>
                        <div class="input-group phone-input">
                            <span class="input-group-addon">
                                <i class="fa fa-phone" aria-hidden="true"></i>
                            </span>
                            <input id="phone" type="tel" pattern="[0-9]{3}-[0-9]{2}-[0-9]{3}" class="form-control" name="phone" placeholder="Phone Number">
                        </div>
                        <!--
                                <br>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="fa fa-birthday-cake" aria-hidden="true"></i></span>
                                    <input id="phone" type="text" class="form-control" name="age" placeholder="Age">
                                </div>
                                <br>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="fa fa-users" aria-hidden="true"></i></span>
                                    <input id="phone" type="text" class="form-control" name="ethnicity" placeholder="Ethnicity">
                                </div>-->
                        <br>
                        <button id="login_number" type="button" class="btn btn-primary btn-lg btn-block">Next</button>
                        <br>
                        <br>
                    </div>
                </div>
            </div>
            <div class="row" id="map-check" style="display: none">
                <div class="col-xs-12">
                    <h1> GPS Check-In</h1>
                    <form>
                        <textarea class="form-control" rows="10" name="note"> Note</textarea>
                        <br><script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
                </div>
            </div>
            <div class="row" id="send-email-response" style="display: block">
                <div class="col-xs-12">
                    <h1> Send Email Response</h1>
                    <form class="mt-5">
                        <label for="email">Email</label>
                        <input id="email" type="email" class="form-control" name="email" placeholder="abc@gmail.com">
                        <br>
                        <br>
                        <button type="button" onclick="sendMail()" class="btn btn-primary ">Submit</button>
                        <button type="button" onclick="deleteMail()" class="btn btn-danger ">Delete</button>
                        <br>
                        <br>
                    </form>
                </div>
            </div>
            <div class="row" id="shelters-screen" style="display: none">
                <h3> Shelters </h3>
                Populate:
                <select id='filter_services'>
                    <option>adults</option>
                    <option>young adults</option>
                    <option>seniors</option>
                    <option>hiv/aids</option>
                </select> TOGGLE FOR MAP View (On / Off)
                <div class="col-xs-12" id='shelters-list'>
                </div>
            </div>
            <div class="row" id="shelters-map" style="display: none">
                <div id='map' style='width: 400px; height: 300px;'></div>
            </div>
        </div>
        <script type="text/javascript">
            var userToken = localStorage.getItem("user-token");
            function showDiv(obj) {
                var selctID = obj.id;
                if (selctID == 'gps-check') {
                    document.getElementById('screen1').style.display = "none";
                    document.getElementById('screen2').style.display = "none";
                    document.getElementById('shelters-screen').style.display = "none";
                    document.getElementById('send-email-response').style.display = "none";
                    document.getElementById('map-check').style.display = "block";
                }
                if (selctID == 'shelters') {
                    document.getElementById('screen1').style.display = "none";
                    document.getElementById('screen2').style.display = "none";
                    document.getElementById('map-check').style.display = "none";
                    document.getElementById('send-email-response').style.display = "none";
                    document.getElementById('shelters-screen').style.display = "block";
                }
                if (selctID == 'send-email') {
                    document.getElementById('screen1').style.display = "none";
                    document.getElementById('screen2').style.display = "none";
                    document.getElementById('map-check').style.display = "none";
                    document.getElementById('shelters-screen').style.display = "none";
                    document.getElementById('send-email-response').style.display = "block";
                }
            }
            function getParam(sParam) {
            var sPageURL = window.location.search.substring(1);
            var sURLVariables = sPageURL.split('&');
            for (var i = 0; i < sURLVariables.length; i++) {
                var sParameterName = sURLVariables[i].split('=');
                if (sParameterName[0] == sParam) {
                return sParameterName[1];
                }
            }
            }
            var lesson_id = getParam('lesson_id');
            if(lesson_id!=="undefined"){
                
                function sendMail(){
                    var email = $('#email').val();
                    console.log("ðŸš€ ~ file: settings.html ~ line 194 ~ sendMail ~ email", email)
                    data = {
                        "email": email
                    }
                    $(document).ready(function () {
        
                        $.ajax({
                            url : SERVER + "courses_api/lesson/student/lesson-email-notify/" + lesson_id,
                            async : true,
                            crossDomain : true,
                            crossOrigin : true,
                            type : 'POST',
                            data: data,
                            headers: { "Authorization": `${localStorage.getItem('user-token')}` }
                        }).done( (response)=> {
                        console.log("ðŸš€ ~ file: settings.html ~ line 202 ~ response", response)
                        swal({
                                title: 'Submitted',
                                text: 'You have successfully register email. Thank you.',
                                icon: 'success',
                                timer: 2000,
                            });
                        }).fail((err) => {
                            console.log("errorss...",err)
                            swal({
                                title: 'Fail',
                                text: 'You have not successfully register email.',
                                icon: 'error',
                                timer: 2000,
                            });
                        })
                        });
                }
                function deleteMail(){
                    var email = $('#email').val();
                    console.log("ðŸš€ ~ file: settings.html ~ line 194 ~ sendMail ~ email", email)
                    data = {
                        "email": email
                    }
                    $(document).ready(function () {
        
                        $.ajax({
                            url : SERVER + "courses_api/lesson/student/lesson-email-notify-delete/" + lesson_id,
                            async : true,
                            crossDomain : true,
                            crossOrigin : true,
                            type : 'DELETE',
                            data: data,
                        }).done( (response)=> {
                        console.log("ðŸš€ ~ file: settings.html ~ line 202 ~ response", response)
                        swal({
                                title: 'Deleted',
                                text: 'You have successfully completed the lesson. Thank you.',
                                icon: 'success',
                                timer: 2000,
                            });
                        }).fail((err) => {
                            console.log("errorss...",err)
                            swal({
                                title: 'fail',
                                text: 'You have successfully completed the lesson. Thank you.',
                                icon: 'error',
                                timer: 2000,
                            });
                        })
                        });
                }
            }
        </script>
     </body>
</html>
